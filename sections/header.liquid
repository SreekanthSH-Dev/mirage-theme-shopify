<!-- Announcement Bar -->
<div class="announcement-bar">
  <div class="announcement-slider">
    <div class="slide">FREE SHIPPING ON ALL ORDERS</div>
    <div class="slide">DISCOVER MIRAGE SS25 COLLECTIONS</div>
  </div>
</div>

<!-- Header Section -->
<header class="site-header">
  <div x-data="{ open: false }" class="header-container">

    <!-- Left: Logo + Navigation -->
    <div class="header-container-left">
      
      <!-- Logo -->
      <div class="site-logo">
        <a href="{{ routes.root_url }}">
          <img src="{{ 'logo.webp' | asset_url }}" height="38" width="125" alt="{{ shop.name }} logo">
        </a>
      </div>

      <!-- Navigation Menu -->
      <nav class="site-nav">
        <ul class="main-menu">
          {% for link in section.settings.menu.links %}
            <li class="menu-item {% if link.links != blank %}has-children{% endif %}">
              <a href="{{ link.url }}" class="header-btn">{{ link.title }}</a>

              {% if link.links != blank %}
                <ul class="submenu">
                  {% for childlink in link.links %}
                    {% assign slug = childlink.title | downcase | replace: ' ', '-' %}
                    {% assign block = shop.metaobjects.submenu_image_block[slug] %}

                    {% if block and block.menu_image %}
                  <li class="submenu-image-block">
                    <a href="{{ childlink.url }}">
                      <div class="submenu-image-wrapper">
                        <img src="{{ block.menu_image | image_url: width: 190 }}" alt="{{ block.alt_text }}">
                        <div class="submenu-overlay">
                          <h3 class="submenu-title">{{ childlink.title }}</h3>
                          <span class="submenu-explore">Explore</span>
                        </div>
                      </div>
                    </a>
                  </li>

                    {% else %}
                    <li class="submenu-text-link">
                      <a href="{{ childlink.url }}">{{ childlink.title }}</a>
                    </li>
                    {% endif %}

                  {% endfor %}
                </ul>

              {% endif %}
            </li>
          {% endfor %}
        </ul>

        <!-- Mobile Navigation -->

      </nav>
    </div>


    <!-- Right: Icons + Mobile Toggle -->
    <div class="header-container-right">
      
      <!-- Mobile Hamburger -->
      <div class="header-hamburger">
        <button 
          class="mobile-menu-btn lg:hidden" 
          @click="open = !open"
          aria-label="Toggle Menu"
        >
          ☰
        </button>
      </div>

      <!-- Icons -->
      <div class="header-icons hidden lg:flex items-center gap-3">
        <div class="currency-selector"><span>EUR | €</span></div>
        <a href="/pages/faq" class="header-link">FAQ</a>
        <a href="/pages/about" class="header-link">About</a>
        <a href="/search" class="icon-button">{% render 'search-icon' %}</a>
        <a href="
          {% if customer %}
            {{ routes.account_url }}
           {% else %}
            {{ routes.account_login_url }}
          {% endif %}
           " class="icon-button">{% render 'account-login' %}</a>
        <a href="{{ routes.cart_url }}" class="icon-button">{% render 'cart-btn' %}</a>
      </div>

    </div>
  </div>
      <div class="mobile-menu-div">

    <ul class="mobile-menu" x-show="open" x-transition>
          {% for link in section.settings.menu.links %}
            <li class="mobile-menu-item {% if link.links != blank %}has-children{% endif %}">
              <a href="{{ link.url }}" class="block py-2 px-4 border-b">{{ link.title }}</a>
              {% if link.links != blank %}
                <ul class="pl-4">
                  {% for childlink in link.links %}
                    <li>
                      <a href="{{ childlink.url }}" class="block py-1 px-4 text-sm text-gray-600">
                        {{ childlink.title }}
                      </a>
                    </li>
                  {% endfor %}
                </ul>
              {% endif %}
            </li>
          {% endfor %}
        </ul>
      </div>

</header>

<style>
  /* Style for toggled menu */
  .mobile-menu {
    display: none;
    flex-direction: column;
  }

  .mobile-menu.active {
    display: flex;
  }

  .mobile-menu-item.has-children ul {
    display: none;
  }

  .mobile-menu-item.open ul {
    display: block;
  }
</style>

<!-- Theme Editor Schema -->
{% schema %}
{
  "name": "Header Navigation",
  "settings": [
    {
      "type": "link_list",
      "id": "menu",
      "label": "Select menu",
      "default": "main-menu"
    }
  ]
}
{% endschema %}
